# Project Tracker: DTC Ecommerce "Calm Form"

## Phase 0: Foundations & Architecture
- [x] Analyze PRD and defined constraints <!-- id: 0 -->
- [x] Design Repository Structure & Architecture (Deliverable: docs/architecture.md) <!-- id: 1 -->
- [x] Initialize Next.js App (Clean Install) <!-- id: 2 -->
  - Created Next.js 15 project with TypeScript and App Router
  - Configured Tailwind CSS with PostCSS
  - Set up folder structure per architecture.md: app/(auth|shop|checkout|account), components/{ui,shop,layout,account}, lib/{supabase,stripe}, types
  - Created root layout, landing page, and cn() utility
  - Verified successful build
- [x] Configure Tailwind, Fonts, and shadcn/ui base <!-- id: 3 -->
  - Configured shadcn/ui with components.json (new-york style, neutral base color)
  - Set up Tailwind theme with CSS variables for premium minimal aesthetic
  - Configured color palette: neutral grays and whites for clean skincare brand
  - Added system font stack (San Francisco, Segoe UI, Roboto) for optimal performance
  - Installed tailwindcss-animate plugin
  - Updated globals.css with shadcn theme variables and base styles
  - Verified successful build
- [x] Set up Supabase Project & Environment Variables <!-- id: 4 -->
  - Installed @supabase/supabase-js and @supabase/ssr packages
  - Created lib/supabase/server.ts with SSR-compatible server client
  - Created lib/supabase/client.ts with browser client
  - Created .env.local.example with Supabase and Stripe variable templates
  - Verified successful build

## Phase 1: Core Components & Design System
- [x] Define Typography & Color Palette (Calm, Premium, Minimal) <!-- id: 5 -->
  - Typography: Defined clear hierarchy (H1-H4, body, small) with negative letter spacing for premium feel
  - Font sizes: xs(12px) to 5xl(48px) with optimized line heights for readability
  - Font weights: normal(400), medium(500), semibold(600) for minimal hierarchy
  - Color palette: Neutral base (white, warm off-white, grays, near-black)
  - Accent color: Subtle sage green (hsl 150 12% 42%) for clinical skincare aesthetic
  - Ring/focus color: Sage green for consistent interactive states
  - Border radius: Minimal (0.375rem) for clean, modern look
  - Added base typography styles in globals.css
  - Verified successful build
- [x] Implement Layouts (RootLayout, ShopLayout, AuthLayout) <!-- id: 6 -->
  - Created ShopLayout: Header/main/footer structure with container and spacing
  - Created AuthLayout: Centered layout for auth forms (max-width 28rem)
  - Created CheckoutLayout: Minimal distraction-free layout (header only, no footer)
  - Created AccountLayout: Sidebar layout for account navigation (aside + main)
  - All layouts use Server Components (default)
  - Created placeholder pages for each route group to verify layouts
  - Structural HTML only - no design, no content, no navigation logic
  - Verified successful build (8 routes generated)
- [x] Build Core UI Components (Buttons, Inputs, Cards) <!-- id: 7 -->
  - Created Button component with shadcn/ui patterns and variants (default, destructive, outline, secondary, ghost, link)
  - Created Input component with focus states and accessibility features
  - Created Card component with subcomponents (CardHeader, CardTitle, CardDescription, CardContent, CardFooter)
  - All components use existing theme variables (no custom colors or styles)
  - Installed dependencies: @radix-ui/react-slot, class-variance-authority
  - Components are generic and reusable (no product-specific logic)
  - Verified successful build
- [x] Build Header & Footer (Responsive) <!-- id: 8 -->
  - Created Header component: Brand name "CALM FORM", navigation (Shop, About), account/cart icons
  - Created Footer component: Brand name, descriptor "Clean skincare essentials", links (Shipping, Privacy, Terms), copyright
  - Created CheckoutHeader component: Minimal logo-only header for distraction-free checkout
  - Mobile-first responsive design: Navigation moves below header on mobile
  - Installed lucide-react for icons (User, ShoppingBag)
  - Updated ShopLayout to use Header and Footer
  - Updated AccountLayout to use Header
  - Updated CheckoutLayout to use CheckoutHeader
  - Created placeholder pages: /about, /shipping, /privacy, /terms
  - All components use Server Components (default)
  - Uses existing typography and color tokens only (no custom styling)
  - Verified successful build (12 routes generated)

## Phase 2: Data Layer & Product Catalog
- [x] Design Database Schema (Products, Orders, Profiles) <!-- id: 9 -->
  - Designed 5-table schema: profiles, products, product_variants, orders, order_items
  - All tables use Supabase/Postgres conventions (UUIDs, timestamptz, proper foreign keys)
  - Supports product browsing with variants (size, skin type)
  - Supports guest checkout (orders.user_id nullable)
  - Preserves historical data (denormalized product names and prices in order_items)
  - Currency stored in cents (integer) to avoid floating-point issues
  - Soft deletes via is_active flags
  - Created comprehensive documentation: docs/database-schema.md
  - Schema includes relationships, indexes, design rationale, and explicit exclusions
  - Verified internal consistency and alignment with architecture.md
  - Created Supabase migration: supabase/migrations/20260122000000_create_ecommerce_schema.sql
  - Migration includes all tables, indexes, RLS policies, and helper functions
- [x] Create Seed Script for "Calm Form" Products <!-- id: 10 -->
  - Created seed script: scripts/seed-products.ts
  - Finalized 8 individual products + 2 bundles (Morning Routine, Evening Routine)
  - Structured 23 SKU variants (sizes, skin types)
  - SKU naming convention: category-type-size-variant
  - Created planning document: docs/seed-data-plan.md
  - Finalized product names with minimal, clinical tone
  - Finalized descriptions (benefit-focused, no marketing hype)
  - Pricing: €28-€72 range for individual products, €128-€132 for bundles (15% discount)
  - Added npm script: `npm run seed:products`
  - Added tsx dev dependency for TypeScript execution
  - Created setup guide: docs/database-setup.md
  - Ready to execute after database migration is applied
- [x] Implement Server-Side Product Fetching <!-- id: 11 -->
  - Product query functions already implemented in lib/queries/products.ts
  - getProducts(category?) - Fetch all products with optional category filter
  - getProductBySlug(slug) - Fetch single product by slug
  - getFeaturedProducts(limit) - Get featured products for homepage
  - getCategories() - Get all unique product categories
  - Types defined in types/index.ts (Product, ProductVariant, ProductWithVariants)
  - All queries use Supabase server client with proper error handling
  - Queries include RLS-aware filtering (is_active = true)
- [x] Build Product Listing Page (PLP) <!-- id: 12 -->
  - Created app/(shop)/products/page.tsx
  - Implements category filtering via URL search params
  - Server-side rendering with async data fetching
  - Components: ProductGrid, CategoryFilter
  - ProductCard component shows product image, name, category, and lowest price
  - "From" price indicator for products with multiple price variants
  - Responsive grid layout (2-col mobile, 3-col tablet, 4-col desktop)
  - Hover effects on product cards (scale transform)
  - Empty state handling ("No products found")
- [x] Build Product Detail Page (PDP) with Variants <!-- id: 13 -->
  - Created app/(shop)/products/[slug]/page.tsx
  - Dynamic route with slug parameter
  - generateMetadata for SEO (product name, description)
  - Two-column layout: product image + details
  - ProductDetails component with variant selection
  - VariantSelector: button group for size/type selection
  - AddToCartButton: integrates with Zustand cart store
  - Stock awareness: disabled state for out-of-stock variants
  - Price updates dynamically based on selected variant
  - Product info: category, name, price, description
  - Additional info: free shipping, return policy
  - Image fallback for products without images
  - notFound() handling for invalid slugs
  - Fixed branding: VÉRA → CALM FORM across all files
  - Fixed Stripe API version compatibility (2025-12-15.clover)
  - Implemented lazy Stripe initialization to fix build errors
  - Verified successful production build

## Phase 3: Cart & Checkout Logic
- [ ] Implement Cart Store (Zustand/Context - Client Side) <!-- id: 14 -->
- [ ] Build Cart Drawer/Page <!-- id: 15 -->
- [ ] Integrate Stripe Checkout (Test Mode) <!-- id: 16 -->
- [ ] Create Order Success Page <!-- id: 17 -->

## Phase 4: Authentication & User Accounts
- [ ] Implement Supabase Auth (Sign Up, Login, Guest) <!-- id: 18 -->
- [ ] Build Account Dashboard (Order History) <!-- id: 19 -->
- [ ] Protect Account Routes (Middleware) <!-- id: 20 -->

## Phase 5: Polish & Deployment
- [ ] Verify Mobile Responsiveness <!-- id: 21 -->
- [ ] Fix Critical UI/UX Bugs <!-- id: 22 -->
- [ ] Final Deployment to Vercel <!-- id: 23 -->
- [ ] Final Review against PRD <!-- id: 24 -->
